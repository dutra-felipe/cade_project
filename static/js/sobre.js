const translations = {
    pt: {
        // Menu de Navegação
        'menu': 'Menu',
        'about': 'Sobre o CADE',
        'press': 'Notas a Imprensa',
        'jurisprudence': 'Jurisprudência',
        'events': 'Eventos',
        // Seletor de Idioma
        'idiomas': 'Idiomas',
        // Conteúdo Principal
        'name': 'Conselho Administrativo de Defesa Econômica',
        'jargao': 'Promovendo a livre concorrência no mercado brasileiro',
        'definicao': 'O que é o CADE?',
        'sobre1': 'O Conselho Administrativo de Defesa Econômica (CADE) é uma autarquia federal brasileira, vinculada ao Ministério da Justiça, que tem como missão zelar pela livre concorrência no mercado, sendo a entidade responsável por investigar e decidir questões relativas à ordem econômica.',
        'sobre2': 'Criado em 1962 e reestruturado em 2012 pela Lei 12.529/2011, o CADE tem papel fundamental na prevenção e repressão às infrações contra a ordem econômica, orientando-se pelos ditames constitucionais de liberdade de iniciativa, livre concorrência, função social da propriedade, defesa dos consumidores e repressão ao abuso do poder econômico.',
        'sobre3': 'Com reconhecimento internacional por sua atuação técnica e independente, o CADE é referência na análise de atos de concentração econômica e no combate a condutas anticompetitivas. A autarquia possui um corpo técnico altamente qualificado e utiliza metodologias avançadas de análise econômica e jurídica para avaliar o impacto de operações empresariais e investigar práticas que possam prejudicar a concorrência no mercado brasileiro, contribuindo assim para o desenvolvimento econômico sustentável do país.',
        //Atribuições
        'atribuitions': 'Principais Atribuições',
        'atrib1_title': 'Preventivo',
        'atrib1': 'Análise de fusões, aquisições e outras operações entre empresas que possam afetar a concorrência.',
        'atrib2_title': 'Repressivo',
        'atrib2': 'Investigação e punição de condutas anticompetitivas, como cartéis e práticas abusivas.',
        'atrib3_title': 'Educativo',
        'atrib3': 'Promoção da cultura da livre concorrência através de palestras, publicações e eventos.',
        // Estrutura Organizacional
        'estructure': 'Estrutura Organizacional',
        'tribunal_title': 'Tribunal Administrativo',
        'tribunal_desc': 'Órgão judicante responsável por julgar processos administrativos.',
        'super_title': 'Superintendência-Geral',
        'super_desc': 'Responsável por investigar e instruir processos administrativos, além de emitir pareceres.',
        'dep_title': 'Departamento de Estudos Econômicos',
        'dep_desc': 'Elabora estudos e pareceres econômicos para subsidiar as decisões do Tribunal.',
        'proc_title': 'Procuradoria Federal Especializada',
        'proc_desc': 'Presta consultoria e assessoramento jurídico ao CADE.'
    },
    en: {
        // Menu de Navegação
        'menu': 'Menu',
        'about': 'About CADE',
        'press': 'Press Releases',
        'jurisprudence': 'Jurisprudence',
        'events': 'Events',
        // Seletor de Idioma
        'idiomas': 'Languages',
        // Conteúdo Principal
        'name': 'Administrative Council for Economic Defense',
        'jargao': 'Promoting free competition in the Brazilian market',
        'definicao': 'What is CADE?',
        'sobre1': 'The Administrative Council for Economic Defense (CADE) is a Brazilian federal agency, linked to the Ministry of Justice, whose mission is to safeguard free competition in the market, being the entity responsible for investigating and deciding issues related to economic order.',
        'sobre2': 'Created in 1962 and restructured in 2012 by Law 12,529/2011, CADE plays a fundamental role in preventing and suppressing violations against the economic order, guided by constitutional principles of freedom of initiative, free competition, social function of property, consumer protection, and repression of economic power abuse.',
        'sobre3': 'With international recognition for its technical and independent performance, CADE is a reference in analyzing economic concentration acts and combating anticompetitive conduct. The agency has a highly qualified technical staff and uses advanced economic and legal analysis methodologies to evaluate the impact of business operations and investigate practices that may harm competition in the Brazilian market, thus contributing to the country\'s sustainable economic development.',
        //Atribuições
        'atribuitions': 'Main Attributions',
        'atrib1_title': 'Preventive',
        'atrib1': 'Analysis of mergers, acquisitions, and other operations between companies that may affect competition.',
        'atrib2_title': 'Repressive',
        'atrib2': 'Investigation and punishment of anticompetitive conduct, such as cartels and abusive practices.',
        'atrib3_title': 'Educative',
        'atrib3': 'Promotion of free competition culture through lectures, publications, and events.',
        // Estrutura Organizacional
        'estructure': 'Organizational Structure',
        'tribunal_title': 'Administrative Tribunal',
        'tribunal_desc': 'Judicial body responsible for judging administrative proceedings.',
        'super_title': 'General Superintendence',
        'super_desc': 'Responsible for investigating and instructing administrative proceedings, as well as issuing opinions.',
        'dep_title': 'Department of Economic Studies',
        'dep_desc': 'Develops economic studies and opinions to support Tribunal decisions.',
        'proc_title': 'Specialized Federal Attorney\'s Office',
        'proc_desc': 'Provides legal consultation and advice to CADE.'
    },
    es: {
        // Menu de Navegação
        'menu': 'Menú',
        'about': 'Sobre CADE',
        'press': 'Notas de Prensa',
        'jurisprudence': 'Jurisprudencia',
        'events': 'Eventos',
        // Seletor de Idioma
        'idiomas': 'Idiomas',
        // Conteúdo Principal
        'name': 'Consejo Administrativo de Defensa Económica',
        'jargao': 'Promoviendo la libre competencia en el mercado brasileño',
        'definicao': '¿Qué es CADE?',
        'sobre1': 'El Consejo Administrativo de Defensa Económica (CADE) es una agencia federal brasileña, vinculada al Ministerio de Justicia, que tiene como misión velar por la libre competencia en el mercado, siendo la entidad responsable de investigar y decidir cuestiones relativas al orden económico.',
        'sobre2': 'Creado en 1962 y reestructurado en 2012 por la Ley 12.529/2011, CADE tiene un papel fundamental en la prevención y represión de infracciones contra el orden económico, orientándose por los dictámenes constitucionales de libertad de iniciativa, libre competencia, función social de la propiedad, defensa de los consumidores y represión del abuso del poder económico.',
        'sobre3': 'Con reconocimiento internacional por su actuación técnica e independiente, CADE es referencia en el análisis de actos de concentración económica y en el combate a conductas anticompetitivas. La agencia posee un cuerpo técnico altamente calificado y utiliza metodologías avanzadas de análisis económico y jurídico para evaluar el impacto de operaciones empresariales e investigar prácticas que puedan perjudicar la competencia en el mercado brasileño, contribuyendo así al desarrollo económico sostenible del país.',
        //Atribuições
        'atribuitions': 'Principales Atribuciones',
        'atrib1_title': 'Preventivo',
        'atrib1': 'Análisis de fusiones, adquisiciones y otras operaciones entre empresas que puedan afectar la competencia.',
        'atrib2_title': 'Represivo',
        'atrib2': 'Investigación y sanción de conductas anticompetitivas, como cárteles y prácticas abusivas.',
        'atrib3_title': 'Educativo',
        'atrib3': 'Promoción de la cultura de libre competencia a través de conferencias, publicaciones y eventos.',
        // Estrutura Organizacional
        'estructure': 'Estructura Organizacional',
        'tribunal_title': 'Tribunal Administrativo',
        'tribunal_desc': 'Órgano judicial responsable de juzgar procesos administrativos.',
        'super_title': 'Superintendencia General',
        'super_desc': 'Responsable de investigar e instruir procesos administrativos, además de emitir dictámenes.',
        'dep_title': 'Departamento de Estudios Económicos',
        'dep_desc': 'Elabora estudios y dictámenes económicos para subsidiar las decisiones del Tribunal.',
        'proc_title': 'Procuraduría Federal Especializada',
        'proc_desc': 'Presta consultoría y asesoramiento jurídico al CADE.'
    }
};

document.getElementById('langSelector').addEventListener('click', function() {
    document.getElementById('langDropdown').classList.toggle('show');
});

document.addEventListener('click', function(event) {
    if (!event.target.closest('.language-selector')) {
        document.getElementById('langDropdown').classList.remove('show');
    }
});

document.querySelectorAll('.language-option').forEach(option => {
    option.addEventListener('click', function() {
        const lang = this.dataset.lang;
        changeLanguage(lang);
        document.getElementById('langDropdown').classList.remove('show');
        
        const langText = this.querySelector('span').textContent;
        document.querySelector('.current-lang').textContent = langText;
    });
});

function changeLanguage(lang) {
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.dataset.translate;
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT') {
                element.placeholder = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.querySelector('.search-input');
    const clearSearchButton = document.getElementById('clearSearch');
    const filterCheckboxes = document.querySelectorAll('.filter-checkbox');
    let timeoutId;

    // Função para submeter o formulário
    function submitSearch() {
        searchForm.submit();
    }

    // Pesquisa ao digitar (com debounce)
    searchInput.addEventListener('input', function() {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(submitSearch, 500);
    });

    // Limpar pesquisa
    clearSearchButton.addEventListener('click', function() {
        searchInput.value = '';
        submitSearch();
    });

    // Submit ao mudar filtros
    filterCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', submitSearch);
    });

    // Remover filtros individuais
    document.getElementById('activeFilters').addEventListener('click', function(e) {
        if (e.target.classList.contains('bi-x-circle')) {
            const filterType = e.target.dataset.filter;
            const filterValue = e.target.dataset.value;

            if (filterType === 'query') {
                searchInput.value = '';
            } else {
                const checkbox = document.querySelector(`input[name="${filterType}"][value="${filterValue}"]`);
                if (checkbox) {
                    checkbox.checked = false;
                }
            }
            submitSearch();
        }
    });
});